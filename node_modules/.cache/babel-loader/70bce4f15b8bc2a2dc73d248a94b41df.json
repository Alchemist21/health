{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\n\nvar _get = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/get\");\n\nvar _inherits = require(\"C:\\\\Users\\\\Me\\\\Desktop\\\\hackfest2019\\\\healthr\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar cheerio_1 = __importDefault(require(\"cheerio\"));\n\nvar service_1 = require(\"./service\");\n\nvar Instagram =\n/*#__PURE__*/\nfunction (_service_1$Service) {\n  _inherits(Instagram, _service_1$Service);\n\n  function Instagram() {\n    _classCallCheck(this, Instagram);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Instagram).apply(this, arguments));\n  }\n\n  _createClass(Instagram, null, [{\n    key: \"getBaseUrls\",\n    value: function getBaseUrls() {\n      var baseUrls = ['https://www.instagram.com/', 'https://instagram.com/'];\n      return baseUrls;\n    }\n  }, {\n    key: \"getProofUrl\",\n    value: function getProofUrl(proof) {\n      var baseUrls = this.getBaseUrls();\n      var normalizedProofUrl = this.normalizeUrl(proof);\n\n      for (var i = 0; i < baseUrls.length; i++) {\n        if (normalizedProofUrl.startsWith(\"\".concat(baseUrls[i]))) {\n          return normalizedProofUrl;\n        }\n      }\n\n      throw new Error(\"Proof url \".concat(proof.proof_url, \" is not valid for service \").concat(proof.service));\n    }\n  }, {\n    key: \"normalizeUrl\",\n    value: function normalizeUrl(proof) {\n      var proofUrl = proof.proof_url;\n      proofUrl = _get(_getPrototypeOf(Instagram), \"prefixScheme\", this).call(this, proofUrl);\n\n      if (proofUrl.startsWith('https://instagram.com')) {\n        var tokens = proofUrl.split('https://instagram.com');\n        proofUrl = \"https://www.instagram.com\".concat(tokens[1]);\n      }\n\n      return proofUrl;\n    }\n  }, {\n    key: \"shouldValidateIdentityInBody\",\n    value: function shouldValidateIdentityInBody() {\n      return true;\n    }\n  }, {\n    key: \"getProofIdentity\",\n    value: function getProofIdentity(searchText) {\n      var $ = cheerio_1.default.load(searchText);\n      var username = $('meta[property=\"og:description\"]').attr('content');\n\n      if (username !== undefined && username.split(':').length > 1) {\n        return username.split(':')[0].match(/(@\\w+)/)[0].substr(1);\n      } else {\n        return '';\n      }\n    }\n  }, {\n    key: \"getProofStatement\",\n    value: function getProofStatement(searchText) {\n      var $ = cheerio_1.default.load(searchText);\n      var statement = $('meta[property=\"og:description\"]').attr('content');\n\n      if (statement !== undefined && statement.split(':').length > 1) {\n        return statement.split(':')[1].trim().replace('“', '').replace('”', '');\n      } else {\n        return '';\n      }\n    }\n  }]);\n\n  return Instagram;\n}(service_1.Service);\n\nexports.Instagram = Instagram;","map":null,"metadata":{},"sourceType":"script"}